<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Components/BandInfo.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Components/BandInfo.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// import dependencies
import React, { useEffect, useState } from 'react';
import { Text, View, Image, TouchableOpacity } from 'react-native';
// import components
import ScreenWrapper from './Common/ScreenWrapper';
import Loading from './Common/Loading';
import LinkWrapper from './Common/LinkWrapper';
import Performance from './Performance/Performance';
// import modules
import { bandImagePath, bandLogoPath, twitterPath } from '../Modules/paths';
import { getBandInfo, getBandPerformance, getLiked } from '../Modules/getBandInfo';
import { cacheImages } from '../Modules/prepare';
import handleLike from '../Modules/handleLike';
// import styles
import { baseStyles } from '../Styles/baseStyles';
import { bandStyles } from '../Styles/bandStyles';

/**
 * @function BandInfo :
 * React Native component for showing information about a band
 * @param {Navigation} Navigation 
 * @returns {Component}
 */
export default function BandInfo({route, navigation}) {
    const [bandInfo, setBandInfo] = useState(false);
    const [bandPerformance, setBandPerformance] = useState(false);
    const [bandLiked, setBandLiked] = useState(false);
    const [buttonBusy, setButtonBusy] = useState(false);

    useEffect(() => {
        (async() => {
            const bandInfo = await getBandInfo(route.params.band);
            const images = [];
            setBandInfo(bandInfo);
            if (bandInfo.BandImg)
                images.push(`${bandImagePath}${bandInfo.BandImg}`);
            if (bandInfo.BandLogo)
                images.push(`${bandLogoPath}${bandInfo.BandLogo}`);
            await cacheImages(images);
            setBandPerformance(await getBandPerformance(route.params.band));
            setBandLiked(await getLiked(route.params.band));
        })();
    }, [route.params.band]);

    if (!bandInfo || !bandPerformance) {
        return (
            &lt;Loading />
        )
    }

    let bandImage, bandLogo, bandBio, bandSpotify, bandTwitter, bandWeb, bandLocation;
    // build screen parts where information available
    if (bandInfo.BandImg) {
        bandImage = &lt;Image
        style={bandStyles.image}
        source={{uri: bandImagePath+bandInfo.BandImg}}
        resizeMode='contain'
    />
    }
    if (bandInfo.bandLogo) {
        bandLogo = &lt;Image
        style={bandStyles.bandLogo}
        source={{uri: bandLogoPath+bandInfo.logo}}
        resizeMode='contain'
    />
    } else {
        bandLogo = &lt;View style={bandStyles.logoContainer}>
            &lt;Text style={baseStyles.stdTitle}>
                {bandInfo.Name}
            &lt;/Text>
        &lt;/View>
    }

    if (bandInfo.Twitter) {
        const twitComp = &lt;View>
            &lt;Image
                resizeMode='cover'
                source={require('../assets/graphics/socials/tw.png')}
            />
        &lt;/View>;
        bandTwitter = &lt;LinkWrapper
            url={twitterPath+bandInfo.Twitter}
            linkComponent={twitComp}
        />
    }
    
    if (bandInfo.Spotify) {
        const spotComp = &lt;View>
            &lt;Image
                resizeMode='cover'
                source={require('../assets/graphics/socials/sp.png')}
            />
        &lt;/View>;
        bandTwitter = &lt;LinkWrapper
            url={bandInfo.Spotify}
            linkComponent={spotComp}
        />
    }

    if (bandInfo.Location) {
        bandLocation = &lt;View style={bandStyles.location}>
            &lt;Text style={baseStyles.stdText}>
                ({bandInfo.Location})
            &lt;/Text>
        &lt;/View>
    }

    bandBio = &lt;View style={bandStyles.bio}>
        &lt;Text style={baseStyles.stdText}>
            {bandInfo.Bio ? bandInfo.Bio : '[no bio yet]'}
        &lt;/Text>
    &lt;/View>

    const performances = &lt;View style={bandStyles.bio}>
        &lt;Text style={baseStyles.stdTitle}>
            Gig Times
        &lt;/Text>
        {bandPerformance.map(performance=>{
            return (
                &lt;Performance
                    performance={performance}
                    key={performance.Id}
                />
            )
        })}
    &lt;/View>

    let likeButtonStyle = null;
    let likeButtonText = 'Like!';
    let likeInfoText = 'Be notified when their show is about to start.';

    if (bandLiked) {
        likeButtonStyle = bandStyles.unlike;
        likeButtonText = 'Unlike';
        likeInfoText = "Don't be notified about this band's shows.";
    }

    let buttonBusyStyle = null;
    if (buttonBusy) {
        buttonBusyStyle = bandStyles.buttonBusy;
        likeButtonText = '...';
    }
    

    const like =
    &lt;View style={[baseStyles.callToActionContainer, {backgroundColor: 'rgba(255, 255, 255, 0.8)'}]}>
        &lt;TouchableOpacity
            style={[baseStyles.callToActionButton, likeButtonStyle, buttonBusyStyle]}
            onPress={() => {
                setButtonBusy(true);
                handleLike(bandInfo, bandLiked, setBandLiked, bandPerformance, setButtonBusy);
                }
            }
        >
            &lt;Text style={baseStyles.callToActionText}>
                {likeButtonText}
            &lt;/Text>
        &lt;/TouchableOpacity>
        &lt;Text style={baseStyles.stdText}>
            {likeInfoText}
        &lt;/Text>
    &lt;/View>

    return (
        &lt;ScreenWrapper
            innerPage={true}
        >
            &lt;View style={baseStyles.contentContainer}>
                &lt;View style={bandStyles.bandHeader}>
                    {bandLogo}
                    {bandLocation}
                &lt;/View>
                &lt;View style={bandStyles.bandImageContainer}>
                    {bandImage}
                &lt;/View>
                {bandBio}
                {like}
                {performances}
                &lt;View name='socials' style={bandStyles.socials}>
                    {bandTwitter}
                    {bandSpotify}
                    {bandWeb}
                &lt;/View>
                {/* spacer - padding on content container not working? */}
                &lt;View style={{height: 80}}>&lt;/View>
            &lt;/View>
        &lt;/ScreenWrapper>
    )
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="paths%2520_%2520%250AURL%2520paths%2520used%2520in%2520other%2520scriptsmodule_.html">paths : 
URL paths used in other scripts</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AllPerformanceHeader:ReactNativecomponentfordisplayinganinformationheaderfortheperformancesmodal">AllPerformanceHeader : 
React Native component for displaying an information header for the performances modal</a></li><li><a href="global.html#AllPerformances:ReactNativecomponentfordisplayingalistofallperformances">AllPerformances : 
React Native component for displaying a list of all performances</a></li><li><a href="global.html#App:Mainreactnativeapp">App : 
Main react native app</a></li><li><a href="global.html#BandInfo:ReactNativecomponentforshowinginformationaboutaband">BandInfo :
React Native component for showing information about a band</a></li><li><a href="global.html#getBandInfo:Retrievebandinfofromlocalstorage">getBandInfo : 
Retrieve band info from local storage</a></li><li><a href="global.html#getBandPerformance:Retrieveperformance(s)byabandfromlocalstorage">getBandPerformance : 
Retrieve performance(s) by a band from local storage</a></li><li><a href="global.html#getLiked:Retrievelikedstatusofbandfromlocalstorage">getLiked : 
Retrieve liked status of band from local storage</a></li><li><a href="global.html#handleLike:Setsupnotificationsandfeedbackonabandlikedbyauser">handleLike : 
Sets up notifications and feedback on a band liked by a user</a></li><li><a href="global.html#handleSwipe:Opensmodalwhenleftscreenswipedetectedhttps://dev.to/nrymarz/creating-a-tinder-style-swiping-component-with-react-native-part-1-2-h45">handleSwipe : 
Opens modal when left screen swipe detected
https://dev.to/nrymarz/creating-a-tinder-style-swiping-component-with-react-native-part-1-2-h45</a></li><li><a href="global.html#HideAllPerformances:ReactNativecomponentfordisplayingabuttontoclosetheperformancesmodal">HideAllPerformances : 
React Native component for displaying a button to close the performances modal</a></li><li><a href="global.html#HomeScreen:ReactNativecomponenttodisplayapplicationhomescreen">HomeScreen : 
React Native component to display application home screen</a></li><li><a href="global.html#LinkWrapper:ReactNativecomponentfordisplayingahyperlinkedchilecomponent">LinkWrapper : 
React Native component for displaying a hyperlinked chile component</a></li><li><a href="global.html#Loading:ReactNativecomponentfordisplayinganimatedscreenwhiledataisloadingasynchronously">Loading : 
React Native component for displaying animated screen while data is loading asynchronously</a></li><li><a href="global.html#NoData:ReactNativecomponentfordisplayingcontentwhenthereisnointernetconnectionandnolocallystoreddata">NoData : 
React Native component for displaying content when there is no internet connection and no locally stored data</a></li><li><a href="global.html#OTLogo:ReactNativecomponentfordisplayingfestivallogo">OTLogo : 
React Native component for displaying festival logo</a></li><li><a href="global.html#PageContainer:ReactNativecomponenttoprovideacontainerappropriatetothecurrentpage">PageContainer : 
React Native component to provide a container appropriate to the current page</a></li><li><a href="global.html#parsePerformances:Takesinputjsonstring,parsesitintoobjectforuseincomponents">parsePerformances : 
Takes input json string, parses it into object for use in components</a></li><li><a href="global.html#Performance:ReactNativecomponentfordisplayinginformationaboutaperformance">Performance :
React Native component for displaying information about a performance</a></li><li><a href="global.html#PostShowHome:ReactNativecomponenttodisplaypost-showinformationscreen">PostShowHome : 
React Native component to display post-show information screen</a></li><li><a href="global.html#prepare:Determinesdatasourcesandretrivesdataonappstartup">prepare : 
Determines data sources and retrives data on app startup</a></li><li><a href="global.html#ScreenWrapper:ReactNativecomponentprovidingatemplatewrapperforeachscreen">ScreenWrapper : 
React Native component providing a template wrapper for each screen</a></li><li><a href="global.html#SwipeHeader:ReactNativecomponenttodisplayinformationalscreenheader">SwipeHeader : 
React Native component to display informational screen header</a></li><li><a href="global.html#VenueInfo:ReactNativecomponentfordisplayinginformationaboutavenue">VenueInfo :
React Native component for displaying information about a venue</a></li><li><a href="global.html#VenueList:ReactNativecomponentfordisplayingalistofvenues">VenueList :
React Native component for displaying a list of venues</a></li><li><a href="global.html#VenueTitle:ReactNativecomponentfordisplayingavenuetitleorlogo">VenueTitle :
React Native component for displaying a venue title or logo</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Tue Feb 01 2022 11:03:14 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
