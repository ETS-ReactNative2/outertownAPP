<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: Components/Home/HomeScreen.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: Components/Home/HomeScreen.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// import dependencies
import React, { useEffect, useState } from 'react';
import { Text, View } from 'react-native';
import AsyncStorage from '@react-native-async-storage/async-storage';
// import components
import ScreenWrapper from '../Common/ScreenWrapper.js';
import Loading from '../Common/Loading.js';
import LinkWrapper from '../Common/LinkWrapper.js';
import OTLogo from '../Common/OTLogo.js';
import VenueList from '../Venue/VenueList.js'
import PostShowHome from './PostShowHome.js';
// import modules
import { cacheImages } from '../../Modules/prepare.js';
import { venueImagePath, venueLogoPath } from '../../Modules/paths';
// import styles
import { baseStyles } from '../../Styles/baseStyles.js';
import { venueStyles } from '../../Styles/venueStyles'

/**
 * @function HomeScreen : 
 * React Native component to display application home screen
 * @param {Navigation} param0 
 * @returns {Component}
 */
export default function HomeScreen({route, navigation}) {
    const [venuesInfo, setVenuesInfo] = useState(false);
    useEffect(() => {
        (async() => {
            // get venue data from local storage
            let localVenuesData = await AsyncStorage.getItem('@venuesData');
            localVenuesData = JSON.parse(localVenuesData)
            let images = [];
            for (let venue of localVenuesData) {
                if (venue.VenueImg)
                images.push(`${venueImagePath}${venue.VenueImg}`);
                if (venue.VenueLogo)
                images.push(`${venueLogoPath}${venue.VenueLogo}`);
            }
            await cacheImages(images)
            .then(res=>setVenuesInfo(localVenuesData));
        })();
    }, []);

    // get local datetime and festival datetimes
    const today = Date.now();
    const festivalDayStart = Date.parse(new Date(Date.UTC(2022, 3, 10)));
    const festivalDayEnd = Date.parse(new Date(Date.UTC(2022, 3, 11, 4)));
    // after the festival, display trailer for 2023
    if (today > festivalDayEnd) {
        return (&lt;PostShowHome />)
    }
    // before the festival, display buy ticket call to action
    let buyTickets;
    if (today &lt; festivalDayStart) {
        buyTickets = (
            &lt;LinkWrapper
                url={"https://www.gigantic.com/outer-town-festival-tickets/bristol-various-bristol-venues/2022-04-10-14-30"}
                linkComponent={
                &lt;View style={[baseStyles.callToActionContainer, baseStyles.callToActionTickets]}>
                    &lt;View style={baseStyles.callToActionButton}>
                        &lt;Text style={baseStyles.callToActionText}>
                            Tickets &amp;gt;&amp;gt;&amp;gt;
                        &lt;/Text>
                    &lt;/View>
                &lt;/View>
                }
            />
        )
    }

    // if we haven't got all the data yet, show the loading screen
    if (!venuesInfo) {
        return (
            &lt;Loading />
        )
    }
    
    return (
        &lt;ScreenWrapper>
            &lt;View style={baseStyles.contentContainer}>
                &lt;OTLogo />
                {buyTickets}
                &lt;View style={venueStyles.venueListContainer}>
                    &lt;Text style={baseStyles.stdTitle}>
                        Participating Venues
                    &lt;/Text>
                &lt;/View>
                {venuesInfo.map((venueInfo)=>
                &lt;View key={venueInfo.Name}>
                    &lt;VenueList
                    venueInfo={venueInfo}
                    navigation={navigation}
                    />
                &lt;/View>)}
            &lt;/View>
        &lt;/ScreenWrapper>
    )
}</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="paths%2520_%2520%250AURL%2520paths%2520used%2520in%2520other%2520scriptsmodule_.html">paths : 
URL paths used in other scripts</a></li></ul><h3>Global</h3><ul><li><a href="global.html#AllPerformanceHeader:ReactNativecomponentfordisplayinganinformationheaderfortheperformancesmodal">AllPerformanceHeader : 
React Native component for displaying an information header for the performances modal</a></li><li><a href="global.html#AllPerformances:ReactNativecomponentfordisplayingalistofallperformances">AllPerformances : 
React Native component for displaying a list of all performances</a></li><li><a href="global.html#App:Mainreactnativeapp">App : 
Main react native app</a></li><li><a href="global.html#BandInfo:ReactNativecomponentforshowinginformationaboutaband">BandInfo :
React Native component for showing information about a band</a></li><li><a href="global.html#getBandInfo:Retrievebandinfofromlocalstorage">getBandInfo : 
Retrieve band info from local storage</a></li><li><a href="global.html#getBandPerformance:Retrieveperformance(s)byabandfromlocalstorage">getBandPerformance : 
Retrieve performance(s) by a band from local storage</a></li><li><a href="global.html#getLiked:Retrievelikedstatusofbandfromlocalstorage">getLiked : 
Retrieve liked status of band from local storage</a></li><li><a href="global.html#handleLike:Setsupnotificationsandfeedbackonabandlikedbyauser">handleLike : 
Sets up notifications and feedback on a band liked by a user</a></li><li><a href="global.html#handleSwipe:Opensmodalwhenleftscreenswipedetectedhttps://dev.to/nrymarz/creating-a-tinder-style-swiping-component-with-react-native-part-1-2-h45">handleSwipe : 
Opens modal when left screen swipe detected
https://dev.to/nrymarz/creating-a-tinder-style-swiping-component-with-react-native-part-1-2-h45</a></li><li><a href="global.html#HideAllPerformances:ReactNativecomponentfordisplayingabuttontoclosetheperformancesmodal">HideAllPerformances : 
React Native component for displaying a button to close the performances modal</a></li><li><a href="global.html#HomeScreen:ReactNativecomponenttodisplayapplicationhomescreen">HomeScreen : 
React Native component to display application home screen</a></li><li><a href="global.html#LinkWrapper:ReactNativecomponentfordisplayingahyperlinkedchilecomponent">LinkWrapper : 
React Native component for displaying a hyperlinked chile component</a></li><li><a href="global.html#Loading:ReactNativecomponentfordisplayinganimatedscreenwhiledataisloadingasynchronously">Loading : 
React Native component for displaying animated screen while data is loading asynchronously</a></li><li><a href="global.html#NoData:ReactNativecomponentfordisplayingcontentwhenthereisnointernetconnectionandnolocallystoreddata">NoData : 
React Native component for displaying content when there is no internet connection and no locally stored data</a></li><li><a href="global.html#OTLogo:ReactNativecomponentfordisplayingfestivallogo">OTLogo : 
React Native component for displaying festival logo</a></li><li><a href="global.html#PageContainer:ReactNativecomponenttoprovideacontainerappropriatetothecurrentpage">PageContainer : 
React Native component to provide a container appropriate to the current page</a></li><li><a href="global.html#parsePerformances:Takesinputjsonstring,parsesitintoobjectforuseincomponents">parsePerformances : 
Takes input json string, parses it into object for use in components</a></li><li><a href="global.html#Performance:ReactNativecomponentfordisplayinginformationaboutaperformance">Performance :
React Native component for displaying information about a performance</a></li><li><a href="global.html#PostShowHome:ReactNativecomponenttodisplaypost-showinformationscreen">PostShowHome : 
React Native component to display post-show information screen</a></li><li><a href="global.html#prepare:Determinesdatasourcesandretrivesdataonappstartup">prepare : 
Determines data sources and retrives data on app startup</a></li><li><a href="global.html#ScreenWrapper:ReactNativecomponentprovidingatemplatewrapperforeachscreen">ScreenWrapper : 
React Native component providing a template wrapper for each screen</a></li><li><a href="global.html#SwipeHeader:ReactNativecomponenttodisplayinformationalscreenheader">SwipeHeader : 
React Native component to display informational screen header</a></li><li><a href="global.html#VenueInfo:ReactNativecomponentfordisplayinginformationaboutavenue">VenueInfo :
React Native component for displaying information about a venue</a></li><li><a href="global.html#VenueList:ReactNativecomponentfordisplayingalistofvenues">VenueList :
React Native component for displaying a list of venues</a></li><li><a href="global.html#VenueTitle:ReactNativecomponentfordisplayingavenuetitleorlogo">VenueTitle :
React Native component for displaying a venue title or logo</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.7</a> on Tue Feb 01 2022 11:03:14 GMT+0000 (Greenwich Mean Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
